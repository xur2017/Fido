<!DOCTYPE html>
{% load static %}

<html lang="en">
  <head>
    {% include "../components/style.html" %}
    <title>{{ pet.name }}</title>
  </head>
<body>
	{% include "../components/nav-bar.html" %}
  <div class="container p-5">
    <div class="d-flex justify-content-center">
      <h4> Pet Profile </h4>
    </div>
    <div class="d-flex justify-content-center">
    {% if request.user.is_authenticated %}
      {% if pet.users.all %}
        {% if request.user in pet.users.all and request.user.user_type == 'S' %}
          <a class="btn btn-outline-primary" href="{% url 'pet:editpet' pet.id %}" role="button">Edit</a>
          <a class="btn btn-outline-primary" href="{% url 'pet:petpic' pet.id %}" role="button">Add Photo</a>
          <a class="btn btn-outline-danger" href="{% url 'pet:deletepet' pet.id %}" role="button">Remove</a>
        {% endif %}
      {% endif %}
    {% endif %}
    </div>
    <div class="d-flex justify-content-center"> 


    <div id="pet-slide" class="carousel carousel-fade" data-ride="carousel">
      <!-- The slideshow -->
      <div class="carousel-inner" style="max-height:500px;max-width:500px;">
        {% for petpic in picture %}
          {%if petpic.profile %}
            <div class="carousel-item active">
          {% else %}
            <div class="carousel-item">
          {%endif%}
            <img src="{{ petpic.photo.url }}" style="height:400px">
          </div>
        {% endfor %}
      </div>
      <!-- Left and right controls -->
      <a class="carousel-control-prev" href="#pet-slide" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#pet-slide" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    <script language="JavaScript" type="text/javascript">
      $(document).ready(function(){
        $('.carousel').carousel({
          interval: 3000,
          pause:"hover"
        })
      });    
    </script>

    </div>
    <div class="d-flex justify-content-center">
      <ul class="list-group">
        <li class="list-group-item"> Name: {{ pet.name }}
        {% if request.user.is_authenticated %}
          {% if pet.users.all %}
            {% if request.user in pet.users.all and request.user.user_type == 'P' %}
              <img src="{%static 'img/fav-button.png'%}" alt="logo" style="width:30px;transform:scaleX(-1);">
            {% endif %}
          {% endif %}
        {% endif %}

        </li>
        <li class="list-group-item"> Type: {{ pet.get_pet_type_display }} </li>
        <li class="list-group-item"> Age: {{ pet.age|floatformat }} </li>
        <li class="list-group-item"> Sex: {{ pet.get_sex_display }} </li>
        <li class="list-group-item"> Breed: {{ pet.get_breed_display }} </li>
        <li class="list-group-item"> Availability: {{ pet.get_availability_display }} </li>
        <li class="list-group-item"> Disposition: {{ pet.get_disposition_display }} </li>
        <li class="list-group-item"> Status: {{ pet.status }} </li>
        <li class="list-group-item"> Description: {{ pet.description }} </li>
        <li class="list-group-item"> Shelter: 
                                          {% for u in pet.users.all %} {% if u.user_type == 'S' %}
                                                <a href="{% url 'pet:user_profile' u.id %}">{{ u.first_name }} {{ u.last_name }}</a>
                                              {% endif %} {% endfor %}
        <li class="list-group-item"> Created on: {{ pet.created_at }} </li>
        <li class="list-group-item"> Updated on: {{ pet.updated_at }} </li>
        </li>
      </ul>
    </div>
    {% if picture %}
    <hr style="width:50%">
    <div class="d-flex justify-content-center">
        <h4>All Photos</h4>
    </div>
    {% endif %}
  </div>
  <div class="row mx-auto">
    {% for obj in picture %}
      {% if obj.photo %}
        {% include "../components/image_card.html" %}
      {% endif %}
    {% endfor %}
  </div>
  {%include "../components/footer.html"%}
</body>
</html>